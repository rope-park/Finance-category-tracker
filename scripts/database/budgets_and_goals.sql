-- 예산 및 목표 설정 데이터
BEGIN;

-- 예산 설정 (사용자별 월별 예산)
INSERT INTO budgets (id, user_id, category_id, amount, period, start_date, end_date, is_active, created_at, updated_at) VALUES

-- 김민수 (직장인) 예산
(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'c1111111-1111-1111-1111-111111111111', 600000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 식비
(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'c1111111-1111-1111-1111-111111111112', 150000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 교통비
(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'c1111111-1111-1111-1111-111111111113', 100000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 카페/음료
(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'c1111111-1111-1111-1111-111111111114', 400000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 쇼핑/의류
(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'c1111111-1111-1111-1111-111111111115', 200000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 취미/문화
(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'c1111111-1111-1111-1111-111111111116', 850000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 주거비
(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', 'c1111111-1111-1111-1111-111111111117', 80000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 통신비

-- 이영희 (주부) 예산
(gen_random_uuid(), '22222222-2222-2222-2222-222222222222', 'c2222222-2222-2222-2222-222222222231', 500000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 장보기
(gen_random_uuid(), '22222222-2222-2222-2222-222222222222', 'c2222222-2222-2222-2222-222222222232', 200000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 육아용품
(gen_random_uuid(), '22222222-2222-2222-2222-222222222222', 'c2222222-2222-2222-2222-222222222233', 150000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 의료비
(gen_random_uuid(), '22222222-2222-2222-2222-222222222222', 'c2222222-2222-2222-2222-222222222234', 250000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 교육비
(gen_random_uuid(), '22222222-2222-2222-2222-222222222222', 'c2222222-2222-2222-2222-222222222235', 100000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 생활용품

-- 박철수 (자영업) 예산
(gen_random_uuid(), '33333333-3333-3333-3333-333333333333', 'c3333333-3333-3333-3333-333333333341', 1500000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 사업경비
(gen_random_uuid(), '33333333-3333-3333-3333-333333333333', 'c3333333-3333-3333-3333-333333333342', 800000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 세금
(gen_random_uuid(), '33333333-3333-3333-3333-333333333333', 'c3333333-3333-3333-3333-333333333343', 300000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 보험료

-- 최지은 (대학생) 예산
(gen_random_uuid(), '44444444-4444-4444-4444-444444444444', 'c4444444-4444-4444-4444-444444444452', 150000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 교재비
(gen_random_uuid(), '44444444-4444-4444-4444-444444444444', 'c4444444-4444-4444-4444-444444444453', 120000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()), -- 친구모임
(gen_random_uuid(), '44444444-4444-4444-4444-444444444444', 'c4444444-4444-4444-4444-444444444454', 60000.00, 'monthly', '2025-09-01', NULL, true, NOW(), NOW()); -- 카페

-- 저축 목표 설정
INSERT INTO goals (id, user_id, name, description, target_amount, current_amount, target_date, status, created_at, updated_at) VALUES

-- 김민수 목표들
(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '신혼집 마련 자금', '결혼 예정으로 신혼집 전세 자금 모으기', 50000000.00, 15000000.00, '2026-06-30', 'active', NOW(), NOW()),
(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '비상 자금', '급여 6개월치 비상 자금 확보', 16800000.00, 8400000.00, '2025-12-31', 'active', NOW(), NOW()),
(gen_random_uuid(), '11111111-1111-1111-1111-111111111111', '해외여행 자금', '유럽 여행 경비', 5000000.00, 1200000.00, '2025-12-01', 'active', NOW(), NOW()),

-- 이영희 목표들
(gen_random_uuid(), '22222222-2222-2222-2222-222222222222', '아이 교육비', '초등학교 입학 준비 자금', 10000000.00, 3500000.00, '2026-03-01', 'active', NOW(), NOW()),
(gen_random_uuid(), '22222222-2222-2222-2222-222222222222', '가족 자동차 구매', '7인승 SUV 구매 자금', 30000000.00, 8000000.00, '2025-11-30', 'active', NOW(), NOW()),

-- 박철수 목표들
(gen_random_uuid(), '33333333-3333-3333-3333-333333333333', '사업 확장 자금', '지점 확장을 위한 투자 자금', 100000000.00, 45000000.00, '2026-12-31', 'active', NOW(), NOW()),
(gen_random_uuid(), '33333333-3333-3333-3333-333333333333', '은퇴 준비 자금', '조기 은퇴를 위한 목돈 마련', 200000000.00, 120000000.00, '2030-01-01', 'active', NOW(), NOW()),

-- 최지은 목표들
(gen_random_uuid(), '44444444-4444-4444-4444-444444444444', '노트북 구매', '프로그래밍 공부용 맥북', 2500000.00, 850000.00, '2025-11-15', 'active', NOW(), NOW()),
(gen_random_uuid(), '44444444-4444-4444-4444-444444444444', '어학연수 자금', '졸업 후 캐나다 어학연수', 15000000.00, 2300000.00, '2026-08-01', 'active', NOW(), NOW());

COMMIT;

-- 결과 확인
SELECT 
    u.first_name || ' ' || u.last_name as user_name,
    COUNT(DISTINCT b.id) as budget_count,
    COUNT(DISTINCT g.id) as goal_count,
    SUM(DISTINCT b.amount) as total_monthly_budget,
    SUM(DISTINCT g.target_amount) as total_goal_amount
FROM users u
LEFT JOIN budgets b ON u.id = b.user_id AND b.is_active = true
LEFT JOIN goals g ON u.id = g.user_id AND g.status = 'active'
WHERE u.id != '00000000-0000-0000-0000-000000000001'
GROUP BY u.id, u.first_name, u.last_name
ORDER BY u.first_name;