-- 종합적인 실제 사용자 환경 mock 데이터 생성
-- 실행 전 기존 데이터 정리 (선택사항)

BEGIN;

-- 기존 데이터 삭제 (demo 사용자 제외)
DELETE FROM transactions WHERE user_id != '00000000-0000-0000-0000-000000000001';
DELETE FROM accounts WHERE user_id != '00000000-0000-0000-0000-000000000001';
DELETE FROM categories WHERE user_id != '00000000-0000-0000-0000-000000000001';
DELETE FROM users WHERE id != '00000000-0000-0000-0000-000000000001';

-- 1. 다양한 프로필의 사용자들 생성
INSERT INTO users (id, email, password_hash, first_name, last_name, created_at, updated_at) VALUES
-- 20대 직장인 (김민수)
('11111111-1111-1111-1111-111111111111', 'minsu.kim@email.com', '$2b$10$example1', '민수', '김', NOW(), NOW()),
-- 30대 주부 (이영희)
('22222222-2222-2222-2222-222222222222', 'younghee.lee@email.com', '$2b$10$example2', '영희', '이', NOW(), NOW()),
-- 40대 자영업자 (박철수)
('33333333-3333-3333-3333-333333333333', 'chulsoo.park@email.com', '$2b$10$example3', '철수', '박', NOW(), NOW()),
-- 대학생 (최지은)
('44444444-4444-4444-4444-444444444444', 'jieun.choi@email.com', '$2b$10$example4', '지은', '최', NOW(), NOW());

-- 2. 다양한 계정 타입 생성
INSERT INTO accounts (id, user_id, name, type, balance, currency, is_active, created_at, updated_at) VALUES

-- 김민수 (직장인) 계정들
('a1111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', '신한은행 주거래', 'checking', 2500000.00, 'KRW', true, NOW(), NOW()),
('a1111111-1111-1111-1111-111111111112', '11111111-1111-1111-1111-111111111111', '카카오뱅크 적금', 'savings', 15000000.00, 'KRW', true, NOW(), NOW()),
('a1111111-1111-1111-1111-111111111113', '11111111-1111-1111-1111-111111111111', '신용카드 (삼성)', 'credit', -450000.00, 'KRW', true, NOW(), NOW()),

-- 이영희 (주부) 계정들
('a2222222-2222-2222-2222-222222222221', '22222222-2222-2222-2222-222222222222', '국민은행 생활비', 'checking', 1800000.00, 'KRW', true, NOW(), NOW()),
('a2222222-2222-2222-2222-222222222222', '22222222-2222-2222-2222-222222222222', '토스뱅크 가계부', 'checking', 850000.00, 'KRW', true, NOW(), NOW()),
('a2222222-2222-2222-2222-222222222223', '22222222-2222-2222-2222-222222222222', '현금지갑', 'cash', 120000.00, 'KRW', true, NOW(), NOW()),

-- 박철수 (자영업) 계정들
('a3333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '우리은행 사업자', 'business', 8500000.00, 'KRW', true, NOW(), NOW()),
('a3333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333', '개인통장', 'checking', 1200000.00, 'KRW', true, NOW(), NOW()),

-- 최지은 (대학생) 계정들
('a4444444-4444-4444-4444-444444444441', '44444444-4444-4444-4444-444444444444', 'KB국민 학생통장', 'checking', 380000.00, 'KRW', true, NOW(), NOW()),
('a4444444-4444-4444-4444-444444444442', '44444444-4444-4444-4444-444444444444', '토스 용돈관리', 'checking', 95000.00, 'KRW', true, NOW(), NOW());

-- 3. 현실적인 카테고리 확장
INSERT INTO categories (id, user_id, name, type, color, icon, is_default, created_at, updated_at) VALUES

-- 공통 수입 카테고리
('c0000000-0000-0000-0000-000000000001', '11111111-1111-1111-1111-111111111111', '급여', 'income', '#4CAF50', 'work', true, NOW(), NOW()),
('c0000000-0000-0000-0000-000000000002', '11111111-1111-1111-1111-111111111111', '부업', 'income', '#8BC34A', 'business_center', false, NOW(), NOW()),
('c0000000-0000-0000-0000-000000000003', '11111111-1111-1111-1111-111111111111', '투자수익', 'income', '#CDDC39', 'trending_up', false, NOW(), NOW()),
('c0000000-0000-0000-0000-000000000004', '11111111-1111-1111-1111-111111111111', '기타수입', 'income', '#FFC107', 'attach_money', false, NOW(), NOW()),

-- 김민수 (직장인) 지출 카테고리
('c1111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', '식비', 'expense', '#FF5722', 'restaurant', false, NOW(), NOW()),
('c1111111-1111-1111-1111-111111111112', '11111111-1111-1111-1111-111111111111', '교통비', 'expense', '#2196F3', 'directions_car', false, NOW(), NOW()),
('c1111111-1111-1111-1111-111111111113', '11111111-1111-1111-1111-111111111111', '카페/음료', 'expense', '#795548', 'local_cafe', false, NOW(), NOW()),
('c1111111-1111-1111-1111-111111111114', '11111111-1111-1111-1111-111111111111', '쇼핑/의류', 'expense', '#E91E63', 'shopping_bag', false, NOW(), NOW()),
('c1111111-1111-1111-1111-111111111115', '11111111-1111-1111-1111-111111111111', '취미/문화', 'expense', '#9C27B0', 'movie', false, NOW(), NOW()),
('c1111111-1111-1111-1111-111111111116', '11111111-1111-1111-1111-111111111111', '주거비', 'expense', '#607D8B', 'home', false, NOW(), NOW()),
('c1111111-1111-1111-1111-111111111117', '11111111-1111-1111-1111-111111111111', '통신비', 'expense', '#00BCD4', 'phone', false, NOW(), NOW()),

-- 이영희 (주부) 카테고리 - 사용자별로 복사
('c2222222-2222-2222-2222-222222222221', '22222222-2222-2222-2222-222222222222', '급여', 'income', '#4CAF50', 'work', true, NOW(), NOW()),
('c2222222-2222-2222-2222-222222222222', '22222222-2222-2222-2222-222222222222', '용돈', 'income', '#FFC107', 'card_giftcard', false, NOW(), NOW()),
('c2222222-2222-2222-2222-222222222231', '22222222-2222-2222-2222-222222222222', '장보기', 'expense', '#FF5722', 'shopping_cart', false, NOW(), NOW()),
('c2222222-2222-2222-2222-222222222232', '22222222-2222-2222-2222-222222222222', '육아용품', 'expense', '#E91E63', 'child_care', false, NOW(), NOW()),
('c2222222-2222-2222-2222-222222222233', '22222222-2222-2222-2222-222222222222', '의료비', 'expense', '#F44336', 'local_hospital', false, NOW(), NOW()),
('c2222222-2222-2222-2222-222222222234', '22222222-2222-2222-2222-222222222222', '교육비', 'expense', '#3F51B5', 'school', false, NOW(), NOW()),
('c2222222-2222-2222-2222-222222222235', '22222222-2222-2222-2222-222222222222', '생활용품', 'expense', '#009688', 'home_repair_service', false, NOW(), NOW()),

-- 박철수 (자영업) 카테고리
('c3333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '사업수입', 'income', '#4CAF50', 'business', true, NOW(), NOW()),
('c3333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333', '임대수입', 'income', '#8BC34A', 'apartment', false, NOW(), NOW()),
('c3333333-3333-3333-3333-333333333341', '33333333-3333-3333-3333-333333333333', '사업경비', 'expense', '#FF5722', 'business_center', false, NOW(), NOW()),
('c3333333-3333-3333-3333-333333333342', '33333333-3333-3333-3333-333333333333', '세금', 'expense', '#F44336', 'account_balance', false, NOW(), NOW()),
('c3333333-3333-3333-3333-333333333343', '33333333-3333-3333-3333-333333333333', '보험료', 'expense', '#2196F3', 'security', false, NOW(), NOW()),

-- 최지은 (대학생) 카테고리
('c4444444-4444-4444-4444-444444444441', '44444444-4444-4444-4444-444444444444', '용돈', 'income', '#4CAF50', 'card_giftcard', true, NOW(), NOW()),
('c4444444-4444-4444-4444-444444444442', '44444444-4444-4444-4444-444444444444', '아르바이트', 'income', '#8BC34A', 'work', false, NOW(), NOW()),
('c4444444-4444-4444-4444-444444444451', '44444444-4444-4444-4444-444444444444', '등록금', 'expense', '#F44336', 'school', false, NOW(), NOW()),
('c4444444-4444-4444-4444-444444444452', '44444444-4444-4444-4444-444444444444', '교재비', 'expense', '#FF5722', 'book', false, NOW(), NOW()),
('c4444444-4444-4444-4444-444444444453', '44444444-4444-4444-4444-444444444444', '친구모임', 'expense', '#E91E63', 'group', false, NOW(), NOW()),
('c4444444-4444-4444-4444-444444444454', '44444444-4444-4444-4444-444444444444', '카페', 'expense', '#795548', 'local_cafe', false, NOW(), NOW());

COMMIT;

-- 확인 쿼리
SELECT 
    u.first_name || ' ' || u.last_name as user_name,
    COUNT(DISTINCT a.id) as account_count,
    COUNT(DISTINCT c.id) as category_count
FROM users u
LEFT JOIN accounts a ON u.id = a.user_id
LEFT JOIN categories c ON u.id = c.user_id
WHERE u.id != '00000000-0000-0000-0000-000000000001'
GROUP BY u.id, u.first_name, u.last_name
ORDER BY u.first_name;